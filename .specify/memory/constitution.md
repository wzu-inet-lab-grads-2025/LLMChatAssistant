<!--
同步报告:

版本更改: 1.1.1 → 1.2.0

添加的原则:
- 版本控制与测试纪律: 每完成一个阶段并通过真实完整的测试后必须 git 提交一个版本

修改的原则: 无

删除的原则: 无

需要更新的模板:
- ✅ .specify/templates/plan-template.md - 已更新
- ✅ .specify/templates/spec-template.md - 已更新
- ✅ .specify/templates/tasks-template.md - 已更新
- ✅ .specify/templates/checklist-template.md - 已更新

后续 TODO: 无
-->

# LLMChatAssistant 项目章程

## 核心原则

### 质量与一致性 (Quality and Consistency)

项目 MUST 保持高质量的代码标准和一致性。所有代码 MUST 遵循统一的编码规范，MUST 经过代码审查，MUST 通过自动化测试。任何偏离质量标准的实现都被明确禁止。每个功能 MUST 确保真实实现了其预期目的，而不允许虚假实现或占位符代码。

**理由**: 质量是项目的基石。一致性使代码更易于维护和协作，防止技术债务的积累。

### 测试真实性 (Test Authenticity)

所有测试 MUST 是真实的测试，绝对不允许使用 mock 测试。涉及大模型调用的测试 MUST 使用真实的智谱 API，而不允许使用模拟回复。测试 MUST 验证实际功能行为，而不是验证模拟的对象。在运行涉及 LLM 的测试之前，MUST 检查是否已配置有效的 API key，如果未配置则 MUST 要求用户配置后再继续。

**理由**: 真实测试确保代码在真实环境中按预期工作。mock 测试可能掩盖真实的集成问题，特别是对于外部依赖如 LLM API。真实 API 测试验证了实际的协议、错误处理和数据格式。

### 文档与可追溯性 (Documentation & Traceability)

所有日志 MUST 写入 logs 文件夹，格式为纯文本 (.log)。每个主要功能、测试运行和错误 MUST 有相应的日志记录，以便追踪和调试。日志 MUST 包含时间戳、操作类型和相关上下文信息。

**理由**: 集中的日志记录使问题可追溯，便于调试和审计。纯文本格式易于阅读和处理，不需要特殊工具。

### 真实集成 (Real Integration)

项目 MUST 使用官方的 zai-sdk Python 包与智谱 AI 进行集成。所有 LLM 调用 MUST 通过真实 API 进行，不允许使用假的或模拟的回复。任何声称与 LLM 交互的功能 MUST 真正调用智谱 API 并返回真实的响应。

**理由**: 使用官方 SDK 确保与智谱 AI 的最佳兼容性和最新特性。真实集成确保开发期间就能发现集成问题，而不是在生产环境中。

### 开发环境标准 (Development Environment Standards)

项目 MUST 使用 uv 创建和管理虚拟环境。Python 版本 MUST 使用 3.11。所有依赖 MUST 通过 uv 安装和管理。开发和测试环境 MUST 保持一致。

**理由**: uv 提供了快速、可靠的依赖管理和虚拟环境创建。固定 Python 版本确保跨环境的一致性。标准化环境减少"在我机器上能工作"的问题。

### 语言规范 (Language Standard)

所有用户回复、代码注释和文档生成 MUST 使用中文。代码中的变量名、函数名等标识符可以使用英文，但所有面向用户的文本、注释和文档 MUST 是中文。这包括但不限于：错误消息、日志输出、API 文档、README 文件和内联代码注释。

**理由**: 使用中文作为项目的主要语言确保了项目与目标用户群体的一致性，提高了可读性和可维护性，使团队成员能够更有效地沟通和协作。

### 版本控制与测试纪律 (Version Control & Testing Discipline)

每完成一个开发阶段并且通过真实且完整的测试后，MUST 使用 git 提交一个版本。阶段的定义包括但不限于：完成设置阶段、完成基础设施阶段、完成某个用户故事、完成重大功能或完成修复工作。测试 MUST 是真实的测试，不允许虚假测试或跳过测试。提交消息 MUST 清晰地描述该阶段完成的工作和测试结果。

**理由**: 分阶段提交确保了项目历史的清晰性和可追溯性。只有在测试通过后才提交保证了每个版本都是稳定和可用的。这种做法使得回滚、分支管理和协作开发更加安全和高效。真实测试确保了提交的质量不会因为测试不充分而受到影响。

## 技术约束

- **Python 版本**: MUST 使用 Python 3.11
- **虚拟环境**: MUST 使用 uv 创建和管理虚拟环境
- **LLM SDK**: MUST 使用 zai-sdk 与智谱 AI 集成
- **日志格式**: MUST 使用纯文本 (.log) 格式，存储在 logs 文件夹
- **依赖管理**: 所有依赖 MUST 通过 uv 管理
- **版本控制**: 每个阶段完成并通过测试后 MUST git 提交版本

## 测试要求

- **真实性**: 所有测试 MUST 是真实测试，不允许 mock
- **API 测试**: 涉及 LLM 的测试 MUST 使用真实的智谱 API
- **API Key 验证**: 运行 LLM 测试前 MUST 验证 API key 已配置
- **功能验证**: 测试 MUST 验证实际功能，不允许虚假测试
- **测试覆盖**: 每个功能 MUST 有相应的测试用例
- **测试纪律**: 测试不通过不允许提交代码

## 治理

### 修正程序

对本章程的任何修正 MUST 遵循以下流程:

1. 提出修正建议并记录理由
2. 更新章程版本号（遵循语义版本控制）
3. 更新所有依赖模板以保持一致性
4. 记录所有更改并更新同步报告
5. 获得批准后应用新章程

### 版本控制

- **MAJOR (主版本)**: 向后不兼容的治理/原则删除或重新定义
- **MINOR (次版本)**: 新原则/部分添加或实质性扩展指导
- **PATCH (补丁版本)**: 澄清、措辞、拼写错误修复、非语义优化

### 合规审查

- 所有代码审查 MUST 验证是否符合章程原则
- 所有功能规范 MUST 与章程约束保持一致
- 所有实施计划 MUST 包含章程合规检查
- 任何偏离原则的决定 MUST 明确记录理由

**版本**: 1.2.0 | **批准日期**: 2025-12-28 | **最后修正**: 2025-12-28
