# [检查清单类型] 检查清单: [功能名称]

**目的**: [此检查清单涵盖内容的简要描述]
**创建时间**: [日期]
**功能**: [链接到 spec.md 或相关文档]

**注意**: 此检查清单由 `/speckit.checklist` 命令基于功能上下文和需求生成.

<!--
  ============================================================================
  重要说明: 以下检查清单项目仅为示例项目, 仅供说明用途.

  /speckit.checklist 命令必须根据以下内容替换为实际项目: 
  - 用户的具体检查清单请求
  - 来自 spec.md 的功能需求
  - 来自 plan.md 的技术上下文
  - 来自 tasks.md 的实施细节

  请勿在生成的检查清单文件中保留这些示例项目.
  ============================================================================
-->

## [类别 1]

- [ ] CHK001 第一个检查清单项目, 具有明确的行动
- [ ] CHK002 第二个检查清单项目
- [ ] CHK003 第三个检查清单项目

## [类别 2]

- [ ] CHK004 另一个类别项目
- [ ] CHK005 具有特定标准的项目
- [ ] CHK006 此类别中的最后一个项目

## 章程合规检查 (Constitution Compliance Checks)

基于 `.specify/memory/constitution.md` 的要求:

### 质量与一致性
- [ ] CHK007 代码遵循项目编码规范
- [ ] CHK008 实现是真实的,不允许虚假实现或占位符
- [ ] CHK009 代码经过审查并符合质量标准

### 测试真实性
- [ ] CHK010 测试不包含任何 mock 测试
- [ ] CHK011 涉及 LLM 的测试使用真实的智谱 API
- [ ] CHK012 API key 验证机制已实现并在测试前执行
- [ ] CHK013 所有测试验证实际功能行为

### 文档与可追溯性
- [ ] CHK014 日志写入 logs 文件夹
- [ ] CHK015 日志格式为纯文本 (.log)
- [ ] CHK016 日志包含时间戳、操作类型和上下文信息
- [ ] CHK017 所有关键操作都有日志记录

### 真实集成
- [ ] CHK018 使用官方 zai-sdk 进行智谱 AI 集成
- [ ] CHK019 所有 LLM 调用通过真实 API 进行
- [ ] CHK020 无使用模拟回复的实现
- [ ] CHK021 LLM 集成经过真实测试验证

### 开发环境标准
- [ ] CHK022 Python 版本为 3.11
- [ ] CHK023 使用 uv 管理虚拟环境
- [ ] CHK024 依赖通过 uv 管理并记录在项目中
- [ ] CHK025 开发和测试环境配置一致

### 语言规范
- [ ] CHK026 所有用户回复使用中文
- [ ] CHK027 所有代码注释使用中文
- [ ] CHK028 所有文档使用中文
- [ ] CHK029 错误消息使用中文
- [ ] CHK030 日志输出使用中文

### 版本控制与测试纪律

- [ ] CHK031 每个阶段完成后运行真实测试
- [ ] CHK032 测试通过后进行 git 提交
- [ ] CHK033 提交消息清晰描述阶段工作和测试结果
- [ ] CHK034 不存在跳过测试或使用虚假测试的情况
- [ ] CHK035 每个用户故事完成后都有相应的 git 提交

### 安全第一原则

- [ ] CHK036 文件访问使用统一的路径白名单控制
- [ ] CHK037 白名单配置存储在 config.yaml 的 file_access.allowed_paths
- [ ] CHK038 路径验证器防止路径遍历攻击(../ 规范化)
- [ ] CHK039 黑名单模式保护敏感文件(.env、.ssh/*、/etc/passwd 等)
- [ ] CHK040 任何工具不绕过白名单访问文件系统

### 自动化与按需索引

- [ ] CHK041 RAG 工具支持按需索引(execute_async 方法)
- [ ] CHK042 索引管理器使用懒加载策略,避免重复索引
- [ ] CHK043 索引持久化存储到 storage/vectors/ 目录
- [ ] CHK044 索引创建验证文件类型(仅文本文件)和大小(最大 10MB)
- [ ] CHK045 系统重启后自动加载已持久化的索引

### 多层防御策略

- [ ] CHK046 文件访问依次通过白名单、黑名单、大小限制、内容类型验证
- [ ] CHK047 命令执行限制输出大小(默认最大 100KB)
- [ ] CHK048 命令参数验证黑名单字符(;, &, |, >, <, `, $, (, ), \n, \r)
- [ ] CHK049 正则表达式搜索验证复杂度,防止 ReDoS 攻击
- [ ] CHK050 Glob 模式匹配限制最大文件数(默认 100 个)

### 可审计性与透明性

- [ ] CHK051 所有文件访问操作记录日志
- [ ] CHK052 所有索引创建记录详细信息(文件路径、分块数量、创建时间)
- [ ] CHK053 所有工具调用记录执行状态、持续时间
- [ ] CHK054 文件访问被拒绝时返回明确的拒绝理由
- [ ] CHK055 提供索引状态查询接口

## 备注

- 完成项目时勾选: `[x]`
- 内联添加评论或发现
- 链接到相关资源或文档
- 项目按顺序编号, 便于参考
